\section{SymPy}
\label{sympy}
SymPy ist eine Python-Bibliothek für symbolisch-mathematische Berechnungen.
Sie unterstützt laut der Dokumentation unter anderem folgende Funktionen \cite{sympy}:

\begin{itemize}
  \item Einfache symbolische Arithmetik
  \item Differenzialrechnung
  \item Integralrechnung
  \item Algebra
\end{itemize}

Dabei ist zu berücksichtigen dass SymPy nicht die Syntax von Python erweitert und ist somit an Limitierungen die in Python vorhanden sind gebunden. Ein Beispiel dafür ist die implizite Multiplikation wie \lstinline!3x! welche in Python nicht erlaubt ist und daher auch nicht in SymPy.
% Zitat: https://www.sympy.org

Um SymPy zu installieren, kann der Befehl \lstinline!pip install sympy!
verwendet werden.

\subsection{Symbole}
\label{sympy:subsection:symbols}

In SymPy müssen Variablen als Symbole definiert werden bevor sie genutzt werden können:
\footnote{Der Import von \lstinline!sympy! wird der
Übersichtlichkeit halber nachfolgend ausgelassen.}
\begin{lstlisting}
>>> from sympy import *
>>> x = symbols('x')
>>> x + 1
x + 1
\end{lstlisting}

\lstinline!symbols! wird dabei ein Reihe von Symbol Variablennamen übergeben, die durch Leerzeichen oder Kommata von einender getrennt sind. Diese werden dann Python Variablen zugewiesen. Dabei müssen diese Namen nicht übereinstimmen und können ebenso länger als ein Zeichen lang sein.

\begin{lstlisting}
>>> x, y, z = symbols('x y z')
>>> a, b = symbols('b a')
>>> a
b
>>> square = symbols('triangle')
>>> square + b
triangle + a
\end{lstlisting}

Üblicherweise werden Symbole allerdings nach dem Variablennamen benannt um Verwirrungen zu vermeiden.

\subsection{Einfache Operationen}
\label{sympy:subsection:simpleOperations}

In diesem Abschnitt werden einige einfache Operationen behandelt, welche mit SymPy umgesetzt werden können.

\subsubsection{Gleichheit}
Da SymPy nicht die Syntax von Python erweitert kann das \lstinline!'='! nicht für den Gleichheitsvergleich genutzt werden. Ebenso kann \lstinline!'=='! nur bedingt zum Vergleich genutzt werden, da es auf die exakte Strukturelle Gleichheit testet und immer ein \lstinline!bool! als Ergebnis hat und somit keine Gleichung erstellen kann.

\footnote{Symbole wie x werden im Weiteren der Übersichtlichkeit halber als initialisiert angesehen }
\begin{lstlisting}
>>> x + 3 == 4 
False
\end{lstlisting}

Um in SymPy eine Gleichung zu erstellen existiert ein spezielles Objekt \lstinline!Eq!
Eine Gleichung wie \lstinline!x + 3 = 4!kann mit folgender Anweisung erzeugt werden:

\begin{lstlisting}
>>> Eq(x + 3, 4)
Eq(x + 3, 4)
\end{lstlisting}

Um zwei Terme auf mathematische Gleichheit zu prüfen, ist es einfacher statt \lstinline!a == b! auf \lstinline! a - b = 0! zu testen. Dazu wird \lstinline!a - b! vereinfacht und anschließend mit \lstinline!0!verglichen. Dazu wird die Funktion \lstinline!simplify! genutzt, auf diese wird im Verlauf noch genauer eingegangen. Sie vereinfacht den Term soweit wie möglich.

Beispielsweise mit der Gleichung \(x + 1)^2 = x^2 + 2x + 1\):
\begin{lstlisting}
>>> a = (x + 1)**2
>>> b = x**2 2 * x + 1
>>> simplify(a - b) == 0
True
\end{lstlisting}



\subsubsection{Substitution}
Substitutionen sind einer der Grundlegenden Aktionen die mit einem mathematischen Ausdruck getan werden können. Bei einer Substitution werden alle Vorkommen von etwas in dem Ausdruck mit etwas neuem ersetzt. Diese Operation wird in SymPy mit der Funktion \lstinline!subs! durchgeführt. Beispielsweise wird x durch y ersetzt:

\begin{lstlisting}
>>> expr = x**2 + 2 * x + z
>>> expr.subs(x, y)
y**2 + 2 * y + z
\end{lstlisting}

\warning{Objekte in SymPy sind unveränderbar. Das bedeutet \lstinline!subs! verändert nicht das bestehende Objekt sonder gibt ein Neues zurück!}

Es ist ebenso möglich mehrere Substitutionen mit einem Aufruf durchzuführen dazu wird \lstinline!subs! eine Liste von Paaren übergeben:

\begin{lstlisting}
>>> expr = x**2 + 2 * x + z
>>> expr.subs([(x, y), (z, 1)])
y**2 + 2 * y + 1
\end{lstlisting}


\subsubsection{String zu SymPy Ausdruck}
Mit der Funktion \lstinline!symify! lasen sich Strings in SymPy Ausdrücke umwandeln.

\begin{lstlisting}
>>> str_expr = "x ** 2 + 2 * x + 1"
>>> expr = sympify(str_expr)
>>> expr
x**2 + 2 * x + 1
\end{lstlisting}
Dabei ist zu beachten, dass der Ausdruck wohlgeformt ist da zur Berechnung \lstinline!eval! genutzt wird.


\subsection{Vereinfachung}
\label{sympy:subsection:simplification}

In SymPy gibt es verschiedene Methoden um Ausdrücke zu vereinfachen.

\subsubsection{Vereinfachen}
Die simpelste Art zu vereinfachen ist die Verwendung der \lstinline!simplify!-Methode. Dabei wird versucht die einfachste Darstellung eines Ausdrucks zu finden und dieser wird dann zurückgegeben. Beispielsweise folgende Vereinfachungen:

\begin{lstlisting}
>>> simplify(sin(x)**2 + cos(x)**2)
1
>>> simplify((x**3 + x**2 - x - 1)/(x**2 + 2*x + 1))
x - 1
>>> simplify(x**2 + 2*x + 1)
x**2 + 2 * x + 1
\end{lstlisting}

Im letzten Beispiel ist zu sehen dass \lstinline!simplify! nichts geändert hat. Möglicherweise wäre eine gewünschte Vereinfachung aber in der Form \(x + 1)^2\). Wenn eine bestimmte Form der Vereinfachung gewollt ist es Sinnvoll die zu dieser Form passende Methode zu wählen.

\subsubsection{Erweitern}
Des Erweitern eines Ausdrucks in SymPy wird über die \lstinline!expand!-Methode realisiert. Untenstehendes Beispiel zeigt wie eine Erweiterung aussehen kann. 

\begin{lstlisting}
>>> expand((x + 1)**2)
x**2 + 2 * x + 1
>>> expand((x + 1)*(x - 2) - (x - 1)*x)
-2
\end{lstlisting}
Wie das Beispiel zeigt kann der Ausdruck durch das Erweitern länger oder kürzer werden. Das hängt davon ab in wie weit sich Teile des Ausdrucks gegenseitig aufheben.

\subsubsection{Faktorisieren}
Faktorisiert wird in SymPy mit der \lstinline!factor!-Methode

\begin{lstlisting}
>>> factor(x**2 + 2 * x + 1)
(x + 1)**2
>>> factor(x**2*z + 4*x*y*z + 4*y**2*z)
z*(x + 2*y)**2
\end{lstlisting}

Wie im Beispiel zu sehen ist ist das Faktorisieren das exakte Gegenteil zum Erweitern.
Mit der \lstinline!factor_list!-Methode lässt sich eine Liste der einzelnen Faktoren ausgeben.

\begin{lstlisting}
>>> factor(x**2*z + 4*x*y*z + 4*y**2*z)
z*(x + 2*y)**2
(1, [(z, 1), (x + 2*y, 2)])
\end{lstlisting}



\subsection{Berechnung}
\label{sympy:subsection:calculus}
Berechnung von Termen

\subsubsection{Differenzieren}


\subsubsection{Integrieren}

\subsubsection{Grenzwerte}



\subsection{Gleichungen Lösen}
\label{sympy:subsection:solvingFunktions}

Funktionen lösen

\subsection{Matrizen}
\label{sympy:subsection:matrices}

Matrizen

\uebung
\aufgabe{numpy_01}
\aufgabe{numpy_02}
